@using ThenAndNow.Enums

<Loader DataLoaded="DataLoaded" NotFound="Entries is null or { Total: 0 }">
    <div class="d-flex flex-md-row flex-column justify-content-between align-items-md-center gap-2 mb-3">
        <div class="form-check form-switch">
            <input @bind="OriginalPhotoFirst" @bind:after="OnOriginalPhotoFirst" class="form-check-input" type="checkbox">
            <label class="form-check-label">@Labels.OriginalPhotoFirst</label>
        </div>

        <InputSelect TValue="Sorting"
                     @bind-Value="QueryParams.Sorting" @bind-Value:after="OnAfterSortingChange"
                     class="d-flex form-select form-select-sm w-auto">
            @foreach (var option in SortingOptions)
            {
                <option value="@(option.Value)">@option.Label</option>
            }
        </InputSelect>
    </div>

    @if (!string.IsNullOrEmpty(Tag))
    {
        <div class="d-flex align-items-center mb-4">
            <a class="me-2" @onclick="() => NavigationService.Navigate(new QueryParams())">
                <img alt="Cancel Icon" src="icons/cancel.svg"/>
            </a>
            <h5 class="m-0">@Labels.TagsResult "@Tag" (@Entries.Total)</h5>
        </div>
    }

    <Virtualize Context="entry" Items="@Entries.Items" ItemSize="1200">
        <Card Entry="entry" @key="entry.Id" OriginalPhotoFirst="@OriginalPhotoFirst" />
    </Virtualize>

    @if (PagesCount > 1)
    {
        <Pagination PagesCount="PagesCount" QueryParams="QueryParams"/>
    }

</Loader>
